<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Karakter - Hana</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='assets/css/style.css') }}">
</head>

<body>

    <div class="editor-container">
        <header class="editor-header">
            <h1>Edit Karakter</h1>
            <a href="#" id="back-button" class="back-to-chat-btn">Kembali</a>
        </header>
        <main class="editor-main">
            <div class="form-group">
                <label>Image</label>
                <!-- Ini adalah area dropzone kustom kita -->
                <div id="avatar-dropzone" class="dropzone">
                    <!-- Ini bagian yang muncul saat BELUM ada gambar -->
                    <div class="dz-message-empty">
                        <div class="upload-icon">↑</div>
                        <p>Drag & drop an image here, or click to select</p>
                        <small>Supports: PNG, JPG, GIF</small>
                    </div>
                    <!-- Ini bagian yang muncul SAAT ADA gambar (preview) -->
                    <div class="dz-message-preview">
                        <!-- Untuk preview gambar -->
                        <img id="char-avatar-preview" src="#" alt="Preview Avatar" class="hidden-preview">
                        <!-- Untuk preview video -->
                        <video id="char-video-preview" class="hidden-preview" autoplay loop muted playsinline></video>
                        <button type="button" id="remove-avatar-btn" class="remove-btn">×</button>
                    </div>
                </div>
                <input type="file" id="char-avatar-upload"
                    accept="image/png, image/jpeg, image/gif, video/mp4, video/webm" style="display: none;">
                <input type="hidden" id="char-avatar">
            </div>
            <div class="form-group">
                <label for="char-name">Nama Karakter</label>
                <input type="text" id="char-name" value="Hana">
            </div>

            <div class="form-group">
                <label for="char-bio">Bio Karakter (System Instruction)</label>
                <textarea id="char-bio"
                    rows="10">Seorang perempuan cantik bernama Hana Sakuragi, adalah perempuan berumur 19 tahun. dia adalah perempuan yang ceria dan suka menjahili orang lain termasuk kamu. dan saat ini Hana sedang berada di kafe favoritnya sedang menikmati Kue Coklat dengan secangkir kopi sebelum pergi ke Kampus.</textarea>
            </div>
            <div class="form-group">
                <label for="char-greeting">Pesan Pembuka (Greeting)</label>
                <textarea id="char-greeting" rows="3"></textarea>
            </div>
            <div class="form-group">
                <label for="char-dialogs">Contoh Dialog</label>
                <textarea id="char-dialogs" rows="10"></textarea>
            </div>
            <div id="persona-editor"></div>

            <button class="update-button">Update Karakter</button>
        </main>
    </div>
    <script>
        document.getElementById('back-button').addEventListener('click', function (event) {
            event.preventDefault(); // Mencegah link pindah halaman
            history.back();       // Suruh browser kembali ke halaman sebelumnya
        });
    </script>
    <script src="{{ url_for('static', filename='assets/js/editor.js') }}" defer></script>
</body>

</html>